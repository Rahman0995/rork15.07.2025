#!/bin/bash

echo "üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞..."

# –ù–∞–π—Ç–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP
echo "üîç –ü–æ–∏—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ IP –∞–¥—Ä–µ—Å–∞..."
node fix-mobile-connection.js

# –ó–∞–ø—É—Å—Ç–∏—Ç—å backend
echo "üîß –ó–∞–ø—É—Å–∫ backend —Å–µ—Ä–≤–µ—Ä–∞..."
npm run backend:dev &
BACKEND_PID=$!

# –ü–æ–¥–æ–∂–¥–∞—Ç—å –Ω–µ–º–Ω–æ–≥–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ backend
sleep 3

# –ó–∞–ø—É—Å—Ç–∏—Ç—å frontend —Å —Ç—É–Ω–Ω–µ–ª–µ–º
echo "üì± –ó–∞–ø—É—Å–∫ frontend —Å —Ç—É–Ω–Ω–µ–ª–µ–º..."
npm run start

# –£–±–∏—Ç—å backend –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
trap "kill $BACKEND_PID" EXIT